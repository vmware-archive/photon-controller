Demo purpose only! Do not use in production.

This pod created by the code here does the following.

 1. Setup watch on K8s Secret API
 2. On watch events to photon-keys secret update the photon config file.
 3. Loop forever

## TODO
 1. Make this pod run only on k8s master nodes.

## Build

### Get dependencies
```
godep restore
```

### Cross compile go code for linux
```
GOOS=linux CGO_ENABLED=0 go build -a --installsuffix cgo --ldflags="-s" -o photon-kube-config
```

### Build the container
```
docker build -t vmware/photon-kube-config:latest .
```

### Publish container image
```
docker push vmware/photon-kube-config:latest
```

## Setup your K8s master
Create directory in K8s master host VM. The config file will be generated by pod in this directory.
```
mkdir -p /etc/photon
```

## Create Pod
kubectl create -f photon-kube-config.yml
